#
# Security and Bootloader (MUST BE FIRST)
#

# Core TF-M config
# CONFIG_BUILD_WITH_TFM=y
# CONFIG_TFM_PROFILE_TYPE_MINIMAL=y
# CONFIG_TFM_IPC=y
# CONFIG_TFM_ISOLATION_LEVEL=1

# Memory partitioning
# CONFIG_PM_PARTITION_SIZE_TFM=0x40000
# CONFIG_PM_PARTITION_SIZE_TFM_SRAM=0x40000

# Disable all secure services
# CONFIG_TFM_PARTITION_PROTECTED_STORAGE=n
# CONFIG_TFM_PARTITION_INTERNAL_TRUSTED_STORAGE=n
# CONFIG_TFM_PARTITION_CRYPTO=n
# CONFIG_TFM_PARTITION_PLATFORM=n
# CONFIG_TFM_PARTITION_INITIAL_ATTESTATION=n

#
# Core Hardware Settings
#
CONFIG_GPIO=y
# CONFIG_ADC=y
# CONFIG_FPU=y
# CONFIG_NORDIC_QSPI_NOR=n
# CONFIG_BOARD_ENABLE_DCDC=y  # Enable DC-DC converter for better power efficiency

#
# I2C Configuration (Required for LSM6DSL)
#
# CONFIG_I2C=y
# CONFIG_NRFX_TWIM0=y
# CONFIG_NRFX_TWIM1=y

#
# Audio Hardware
#
CONFIG_I2S=y
CONFIG_I2S_NRFX=y
CONFIG_SPI_NRFX=y
CONFIG_AUDIO=y
CONFIG_AUDIO_DMIC=y
CONFIG_AUDIO_DMIC_NRFX_PDM=y
CONFIG_NRFX_PDM0=y  # PDM microphone

#
# Bluetooth Core Settings
#
CONFIG_BT=y
CONFIG_BT_HCI=n
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_CENTRAL=y
CONFIG_BT_MAX_CONN=1
CONFIG_BT_MAX_PAIRED=1
CONFIG_BT_DEVICE_NAME="Omi Consumer Version 1"
CONFIG_BT_DEVICE_APPEARANCE=22
CONFIG_BT_GATT_DYNAMIC_DB=y

#
# Bluetooth Performance Settings
#
# CONFIG_BT_CTLR=y
# CONFIG_BT_CTLR_TX_PWR_ANTENNA=8
# CONFIG_BT_PHY_UPDATE=y
# CONFIG_BT_L2CAP_TX_MTU=498
# CONFIG_BT_CTLR_DATA_LENGTH_MAX=251
# CONFIG_BT_CTLR_PHY_2M=y
# CONFIG_BT_CTLR_PHY_CODED=y
# CONFIG_BT_CTLR_SDC_MAX_CONN_EVENT_LEN_DEFAULT=400000

#
# Bluetooth Buffer Configuration
#
# CONFIG_BT_CONN_TX_MAX=20
# CONFIG_BT_BUF_ACL_RX_SIZE=1024
# CONFIG_BT_L2CAP_TX_BUF_COUNT=10
# CONFIG_BT_BUF_ACL_TX_SIZE=2048
CONFIG_BT_DATA_LEN_UPDATE=y
CONFIG_BT_USER_DATA_LEN_UPDATE=y
# CONFIG_BT_AUTO_DATA_LEN_UPDATE=y
CONFIG_BT_USER_PHY_UPDATE=y
# CONFIG_BT_AUTO_PHY_UPDATE=y

#
# Bluetooth Device Information Service
#
CONFIG_BT_BAS=y
CONFIG_BT_DIS=y
CONFIG_BT_DIS_PNP=n
CONFIG_BT_DIS_MODEL="Omi Consumer Version 1"
CONFIG_BT_DIS_MANUF="Based Hardware"
CONFIG_BT_DIS_FW_REV=y
CONFIG_BT_DIS_HW_REV=y
CONFIG_BT_DIS_FW_REV_STR="2.0.9"
CONFIG_BT_DIS_HW_REV_STR="Nordic nRF7002/nRF5340"

#
# Logging and Debug
#
CONFIG_CONSOLE=n
# CONFIG_LOG=y
# CONFIG_LOG_PRINTK=y
# CONFIG_LOG_MODE_IMMEDIATE=y
# CONFIG_LOG_BACKEND_UART=y
# CONFIG_LOG_BACKEND_UART_OUTPUT_TEXT=y
# CONFIG_LOG_BACKEND_UART=n
# CONFIG_USE_SEGGER_RTT=y
# CONFIG_LOG_BACKEND_RTT=y
CONFIG_DEBUG=y
CONFIG_DEBUG_OPTIMIZATIONS=y
CONFIG_DEBUG_COREDUMP=y
CONFIG_DEBUG_COREDUMP_BACKEND_LOGGING=y

#
# Storage and Filesystem
#
CONFIG_DISK_ACCESS=y
CONFIG_FILE_SYSTEM=y
CONFIG_FAT_FILESYSTEM_ELM=y
CONFIG_FS_FATFS_MOUNT_MKFS=y
CONFIG_FS_FATFS_EXFAT=y
CONFIG_HEAP_MEM_POOL_SIZE=4096

#
# Sensors
#
# CONFIG_SENSOR=y
# CONFIG_LSM6DSL=y
# CONFIG_LSM6DSL_ENABLE_TEMP=n

#
# System Configuration
#
# CONFIG_MAIN_STACK_SIZE=2048
CONFIG_RING_BUFFER=y
# CONFIG_PM_DEVICE=y
# CONFIG_USB_DEVICE_STACK=y
# CONFIG_POWEROFF=y

#
# Omi Features
#
CONFIG_OMI_CODEC_OPUS=y
# CONFIG_OMI_ENABLE_OFFLINE_STORAGE=y
# CONFIG_OMI_ENABLE_ACCELEROMETER=y
# CONFIG_OMI_ENABLE_BUTTON=y
# CONFIG_OMI_ENABLE_SPEAKER=y
# CONFIG_OMI_ENABLE_BATTERY=y
# CONFIG_OMI_ENABLE_USB=y
# CONFIG_OMI_ENABLE_HAPTIC=y

CONFIG_OMI_USE_LEGACY_SDK=n
CONFIG_OMI_USE_LEGACY_SOC=n