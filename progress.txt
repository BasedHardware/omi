# Localization Progress Tracker v2

**Project:** Omi Flutter App - Hardcoded String Localization
**Created:** 2026-01-20
**Version:** 2.0
**Status:** IN PROGRESS

## Summary

| Metric | Value |
|--------|-------|
| Total Files | ~48 |
| Total Strings | ~405 |
| Completed Files | 29 |
| In Progress | 0 |
| Pending Files | ~19 |
| Progress | ~71% |

**CRITICAL ISSUE**: ~162 pre-existing l10n keys in non-English ARB files still contain
English text instead of proper translations. See PRIORITY 0 section below.

================================================================================
## PRIORITY 0: CRITICAL - Pre-existing Untranslated Keys (~162 keys)
================================================================================

### [ ] Translate pre-existing English keys in all non-English ARB files
Status: PENDING
Priority: CRITICAL - Affects all non-English users

Sample of untranslated keys (showing English values that need translation):
- couldNotLaunchUpgradePage: "Could not launch upgrade page. Please try again."
- signOutConfirmation: "Are you sure you want to sign out?"
- deleteRecording: "Delete Recording"
- memoryCreationFailed: "Memory creation failed. It will be retried soon."
- resetPreferencesDisclaimer: "Resetting preferences will not affect your memories..."
- listeningFrom: "Listening from"
- connectToFriend: "Connect to Friend"
- speakingLanguage: "Speaking Language"
- recordingLanguage: "Recording Language"
- selectYourLanguage: "Select Your Language"
- discoverNewApps: "Discover new apps"
- And ~150 more keys...

================================================================================
## PRIORITY 1-5: ORIGINAL PRD FILES (93% Complete)
================================================================================

### PRIORITY 1: HIGH IMPACT - User-Facing Features

### [x] pages/conversation_detail/widgets/create_template_bottom_sheet.dart (~20 strings)
Status: COMPLETED
Keys: templateName, templateNameHint, nameMustBeAtLeast3Characters, conversationPromptHint,
      pleaseEnterAppPrompt, promptMustBeAtLeast10Characters, anyoneCanDiscoverTemplate,
      onlyYouCanUseTemplate, generatingDescription, creatingAppIcon, installingApp,
      appCreatedAndInstalled, appCreatedSuccessfully, failedToCreateApp

### [x] pages/apps/providers/add_app_provider.dart (~20 strings)
Status: COMPLETED
Keys: addAppSelectCoreCapability, addAppSelectPaymentPlan, addAppSelectCapability,
      addAppSelectLogo, addAppEnterChatPrompt, addAppEnterConversationPrompt,
      addAppSelectTriggerEvent, addAppEnterWebhookUrl, addAppSelectCategory,
      addAppFillRequiredFields, addAppUpdatedSuccess, addAppUpdateFailed,
      addAppSubmittedSuccess, addAppErrorOpeningFilePicker, addAppErrorSelectingImage,
      addAppPhotosPermissionDenied, addAppErrorSelectingImageRetry,
      addAppErrorSelectingThumbnail, addAppErrorSelectingThumbnailRetry,
      addAppCapabilityConflictWithPersona, addAppPersonaConflictWithCapabilities

### [x] pages/persona/persona_provider.dart (~15 strings)
Status: COMPLETED
Keys: personaTwitterHandleNotFound, personaTwitterHandleSuspended, personaFailedToVerifyTwitter,
      personaFailedToFetch, personaFailedToCreate, personaConnectKnowledgeSource,
      personaUpdatedSuccessfully, personaFailedToUpdate, personaPleaseSelectImage,
      personaFailedToCreateTryLater, personaFailedToCreateWithError, personaFailedToEnable,
      personaErrorEnablingWithError

### [x] pages/payments/payment_method_provider.dart (3 strings)
Status: COMPLETED
Keys: paymentFailedToFetchCountries, paymentFailedToSetDefault, paymentFailedToSavePaypal

### [x] pages/payments/paypal_setup_page.dart (2 strings)
Status: COMPLETED
Keys: paypalEmailHint, paypalMeLinkHint (reused existing)

### [x] pages/payments/models/payment_method_config.dart (5 strings)
Status: COMPLETED
Keys: paymentMethodStripe, paymentMethodPayPal, paymentStatusActive,
      paymentStatusConnected, paymentStatusNotConnected

--------------------------------------------------------------------------------
### PRIORITY 2: MEDIUM IMPACT - Settings & Configuration

### [x] pages/apps/widgets/payment_details_widget.dart (5 strings)
Status: COMPLETED
Keys: paymentAppCost, paymentEnterValidAmount, paymentEnterAmountGreaterThanZero,
      paymentPlan, paymentNoneSelected

### [x] pages/settings/ai_app_generator_provider.dart (9 strings)
Status: COMPLETED
Keys: aiGenPleaseEnterDescription, aiGenCreatingAppIcon, aiGenErrorOccurredWithDetails,
      aiGenAppCreatedSuccessfully, aiGenFailedToCreateApp, aiGenErrorWhileCreatingApp,
      aiGenFailedToGenerateApp, aiGenFailedToRegenerateIcon, aiGenPleaseGenerateAppFirst

### [x] pages/persona/twitter/social_profile.dart (7 strings)
Status: COMPLETED
Keys: xHandleTitle, xHandleDescription, xHandleHint, xHandlePleaseEnter,
      xHandlePleaseEnterValid, nextButton, connectOmiDevice

### [x] pages/settings/widgets/plans_sheet.dart (7 strings)
Status: PARTIALLY COMPLETED
Keys added: planSwitchingDescriptionWithTitle, planUpgradeScheduledMessage,
            couldNotSchedulePlanChange, subscriptionReactivatedDefault,
            subscriptionSuccessfulCharged, couldNotProcessSubscription, couldNotLaunchUpgradePage
REMAINING: "Cancel Subscription", "Omi Training" (x2) - see Priority 6

### [x] pages/settings/transcription_settings_page.dart (2 strings)
Status: COMPLETED
Keys: transcriptionJsonPlaceholder, transcriptionSourceOmi

### [x] pages/settings/ai_app_generator_page.dart (1 string)
Status: COMPLETED
Keys: pricePlaceholder

### [x] pages/settings/import_history_page.dart (2 strings)
Status: COMPLETED
Keys: importErrorOpeningFilePicker, importErrorGeneric

### [x] pages/apps/app_detail/app_detail.dart (1 string)
Status: COMPLETED
Keys: errorWithMessage (reused existing)

--------------------------------------------------------------------------------
### PRIORITY 3: NOTIFICATIONS & SERVICES

### [x] services/notifications/merge_notification_handler.dart (2 strings)
Status: COMPLETED
Keys: mergeConversationsSuccessTitle, mergeConversationsSuccessBody

### [x] services/notifications/daily_reflection_notification.dart (2 strings)
Status: COMPLETED
Keys: dailyReflectionNotificationTitle, dailyReflectionNotificationBody

### [x] services/notifications/action_item_notification_handler.dart (1 string)
Status: COMPLETED
Keys: actionItemReminderTitle

### [x] services/devices/device_connection.dart (2 strings)
Status: COMPLETED
Keys: deviceDisconnectedTitle, deviceDisconnectedBody

### [x] services/devices/models.dart (1 string)
Status: N/A (debug log message, not user-facing)

--------------------------------------------------------------------------------
### PRIORITY 4: DESKTOP APP

### [x] desktop/pages/onboarding/desktop_onboarding_wrapper.dart (10 strings)
Status: COMPLETED
Keys: onboardingSignIn, onboardingYourName, onboardingLanguage, onboardingPermissions,
      onboardingComplete, onboardingWelcomeToOmi, onboardingTellUsAboutYourself,
      onboardingChooseYourPreference, onboardingGrantRequiredAccess, onboardingYoureAllSet

### [x] desktop/pages/settings/desktop_settings_modal.dart (2 strings)
Status: N/A (URLs/emails displayed as data, not labels)

### [x] desktop/pages/conversations/widgets/desktop_name_speaker_dialog.dart (10 strings)
Status: COMPLETED
Keys: tagSpeaker, enterPersonsName, personNameAlreadyExists, selectYouFromList,
      cancel, addPerson, tagOtherSegmentsFromSpeaker, tagOtherSegments, managePeople, save

--------------------------------------------------------------------------------
### PRIORITY 5: LOWER IMPACT

### [x] pages/conversation_detail/page.dart (1 string)
Status: COMPLETED
Keys: searchTranscriptOrSummary

### [x] pages/conversations/widgets/goal_tracker_widget.dart (1 string)
Status: COMPLETED
Keys: myGoal

### [x] main.dart (1 string)
Status: N/A (const WindowOptions before app init, no BuildContext available)

================================================================================
## PRIORITY 6: NEWLY DISCOVERED FILES (~80 strings)
================================================================================

### 6.1 Core App Shell & Providers

### [x] core/app_shell.dart (22 strings)
Status: COMPLETED
Description: Integration connection success/error messages
Keys: appNotAvailable, failedToConnectTodoist, failedToConnectAsana, failedToConnectGoogleTasks,
      failedToConnectClickUp, failedToConnectServiceWithError, successfullyConnectedTodoist,
      failedToConnectTodoistRetry, successfullyConnectedAsana, failedToConnectAsanaRetry,
      successfullyConnectedGoogleTasks, failedToConnectGoogleTasksRetry, successfullyConnectedClickUp,
      failedToConnectClickUpRetry, successfullyConnectedNotion, failedToRefreshNotionStatus,
      successfullyConnectedGoogle, failedToRefreshGoogleStatus, successfullyConnectedWhoop,
      failedToRefreshWhoopStatus, successfullyConnectedGitHub, failedToRefreshGitHubStatus

### [x] providers/auth_provider.dart (8 strings)
Status: COMPLETED
Description: Authentication error messages
Keys: authFailedToSignInWithGoogle, authenticationFailed, authFailedToSignInWithApple,
      authFailedToRetrieveToken, authUnexpectedErrorFirebase, authUnexpectedError,
      authFailedToLinkGoogle, authFailedToLinkApple

### [x] providers/onboarding_provider.dart (~20 strings)
Status: COMPLETED
Description: Permission error messages
Keys added:
- onboardingBluetoothRequired, onboardingBluetoothDeniedSystemPrefs, onboardingBluetoothStatusCheckPrefs,
  onboardingFailedCheckBluetooth, onboardingNotificationDeniedSystemPrefs, onboardingNotificationDeniedNotifications,
  onboardingNotificationStatusCheckPrefs, onboardingFailedCheckNotification, onboardingLocationGrantInSettings,
  onboardingMicrophoneRequired, onboardingMicrophoneDenied, onboardingMicrophoneStatusCheckPrefs,
  onboardingFailedCheckMicrophone, onboardingScreenCaptureRequired, onboardingScreenCaptureDenied,
  onboardingScreenCaptureStatusCheckPrefs, onboardingFailedCheckScreenCapture, onboardingAccessibilityRequired,
  onboardingAccessibilityStatusCheckPrefs, onboardingFailedCheckAccessibility

### [x] providers/message_provider.dart (~12 strings)
Status: COMPLETED
Description: Camera/photo/file picker error messages
Keys added: msgCameraNotAvailable, msgCameraPermissionDenied, msgCameraAccessError, msgPhotoError,
            msgMaxImagesLimit, msgFilePickerError, msgSelectImagesError, msgPhotosPermissionDenied,
            msgSelectImagesGenericError, msgMaxFilesLimit, msgSelectFilesError, msgSelectFilesGenericError,
            msgUploadFileFailed, msgReadingMemories, msgLearningMemories, msgUploadAttachedFileFailed

### [x] providers/capture_provider.dart (6 strings)
Status: COMPLETED
Description: Recording error messages
Keys added: captureRecordingError, captureRecordingStoppedDisplayIssue, captureMicrophonePermissionRequired,
            captureMicrophonePermissionInSystemPreferences, captureScreenRecordingPermissionRequired,
            captureDisplayDetectionFailed
Keys with placeholders: captureRecordingError, captureRecordingStoppedDisplayIssue

### [ ] providers/developer_mode_provider.dart (~5 strings)
Status: PENDING
Description: Webhook validation errors
Strings found:
- "Invalid audio bytes webhook URL"
- "Invalid realtime transcript webhook URL"
- "Invalid conversation created webhook URL"
- "Invalid day summary webhook URL"
- "Settings saved!"

### [ ] providers/voice_recorder_provider.dart (1 string)
Status: PENDING
Strings found:
- "Failed to transcribe audio"

--------------------------------------------------------------------------------
### 6.2 UI Components

### [ ] pages/settings/widgets/plans_sheet.dart (3 remaining strings)
Status: PENDING
Strings found:
- Line 1706: "Cancel Subscription"
- Line 2108: "Omi Training"
- Line 2197: "Omi Training"

### [ ] pages/conversations/sync_widgets/location_permission_dialog.dart (3 strings)
Status: PENDING
Strings found:
- "Location Permission Required"
- "Cancel"
- "Open Settings"

### [ ] pages/conversations/widgets/merge_action_bar.dart (1 string)
Status: PENDING
Strings found:
- Line 185: label: 'OK'

--------------------------------------------------------------------------------
### 6.3 PDF Export Strings

### [ ] pages/conversation_detail/share.dart (~10 strings)
Status: PENDING
Description: PDF export labels (may be special case - pdf package)
Strings found:
- "Transcript Export"
- "Conversation Export"
- "Title: ${structured.title}"
- "Overview"
- "Action Items"
- "Summary"

--------------------------------------------------------------------------------
### 6.4 Date/Time Locale Issues (~20 strings)

### [ ] utils/other/time_utils.dart (~15 strings)
Status: PENDING
Priority: HIGH - Affects all date/time displays for non-English users
Description: Time duration strings not using l10n
Strings found:
- Line 3: "secs"
- Line 9: "min"
- Line 11: "mins"
- Line 13: "mins", "secs"
- Line 19: "hour"
- Line 21: "hours"
- Line 24: "hours", "mins"
- Line 30: "day"
- Line 32: "days"
- Line 35: "days", "hours"
- Compact format: "s", "m", "h" (lines 44, 49, 52, 57, 60)

### [ ] utils/other/temp.dart (1 string)
Status: PENDING
Description: Hardcoded "Yesterday" in formatChatTimestamp()
Strings found:
- Line 35: "Yesterday" (should use context.l10n.yesterday)

### [ ] widgets/transcript.dart (1 string)
Status: PENDING
Description: Duplicate formatChatTimestamp() with hardcoded "Yesterday"
Strings found:
- Line 857: "Yesterday" (should use context.l10n.yesterday)

### [ ] pages/conversations/widgets/conversation_list_item.dart (~12 strings)
Status: PENDING
Priority: HIGH - Core user-facing widget
Description: Hardcoded strings in conversation list item
Strings found:
- Line 197: "Delete Conversation?" (dialog title)
- Line 198: "Are you sure you want to delete this conversation? This action cannot be undone." (dialog body)
- Line 199: "Confirm" (button text)
- Line 208: "Unable to Delete Conversation" (dialog title)
- Line 209: "Please check your internet connection and try again." (dialog body)
- Line 211: "OK" (button text)
- Line 300, 488: "New ðŸš€" (status indicator, x2)
- Line 387: "${...} photos" (plural not localized)
- Line 427: "Upgrade to unlimited" (locked overlay)
- Line 629: "Merging..." (merging indicator)
Also uses:
- dateTimeFormat('h:mm a', ...) without locale (lines 316, 493)
- secondsToCompactDuration() which has hardcoded English time units

### [ ] pages/conversations/widgets/date_list_item.dart (1 issue)
Status: PENDING
Description: dateTimeFormat without locale
Issue found:
- Line 30: dateTimeFormat('MMM dd', date) - no locale passed
Note: Correctly uses context.l10n.yesterday for "Yesterday"

### [ ] Multiple files: DateFormat without locale parameter
Status: PENDING
Description: DateFormat calls not passing locale - dates display in English format regardless of user locale
Files affected:
- desktop/pages/settings/desktop_settings_modal.dart (lines 1641, 1646)
- pages/settings/calendar_settings_page.dart (lines 539, 544)
- pages/settings/usage_page.dart (lines 839, 845)
- pages/conversations/widgets/score_widget.dart (line 704)
- pages/apps/widgets/api_keys_widget.dart (line 335)
- desktop/pages/conversations/desktop_conversations_page.dart (lines 597, 748, 785)
- pages/conversations/widgets/conversation_list_item.dart (lines 316, 493)
- pages/conversations/widgets/date_list_item.dart (line 30)
- And ~20+ other files using dateTimeFormat() without locale

Note: The dateTimeFormat() helper in temp.dart accepts optional locale but NO callers pass it.
Fix requires either:
1. Refactor dateTimeFormat() to require BuildContext and get locale from Localizations.localeOf(context)
2. Or pass locale explicitly at all call sites

================================================================================
## CHANGELOG
================================================================================

[2026-01-21] Localized providers/capture_provider.dart with 6 l10n keys for 34 languages
- Added 6 new localization keys for recording error and permission messages
- Keys added: captureRecordingError, captureRecordingStoppedDisplayIssue, captureMicrophonePermissionRequired,
  captureMicrophonePermissionInSystemPreferences, captureScreenRecordingPermissionRequired, captureDisplayDetectionFailed
- Keys with placeholders: captureRecordingError, captureRecordingStoppedDisplayIssue
- Updated Dart code to use MyApp.navigatorKey.currentContext?.l10n pattern with fallbacks

[2026-01-20] Localized providers/message_provider.dart with 16 l10n keys for 34 languages
- Added 16 new localization keys for camera/photo/file picker error messages and loading text
- Keys added: msgCameraNotAvailable, msgCameraPermissionDenied, msgCameraAccessError, msgPhotoError,
  msgMaxImagesLimit, msgFilePickerError, msgSelectImagesError, msgPhotosPermissionDenied,
  msgSelectImagesGenericError, msgMaxFilesLimit, msgSelectFilesError, msgSelectFilesGenericError,
  msgUploadFileFailed, msgReadingMemories, msgLearningMemories, msgUploadAttachedFileFailed
- Keys with placeholders: msgCameraAccessError, msgFilePickerError, msgSelectImagesError, msgSelectFilesError
- Updated Dart code to use MyApp.navigatorKey.currentContext?.l10n pattern with fallbacks

[2026-01-20] Localized providers/onboarding_provider.dart with 20 l10n keys for 34 languages
- Added 20 new localization keys for permission error messages (Bluetooth, Notification, Location, Microphone, Screen Capture, Accessibility)
- Keys with placeholders: onboardingBluetoothStatusCheckPrefs, onboardingNotificationStatusCheckPrefs,
  onboardingMicrophoneStatusCheckPrefs, onboardingScreenCaptureStatusCheckPrefs, onboardingAccessibilityStatusCheckPrefs,
  onboardingFailedCheckBluetooth, onboardingFailedCheckNotification, onboardingFailedCheckMicrophone,
  onboardingFailedCheckScreenCapture, onboardingFailedCheckAccessibility
- Updated Dart code to use MyApp.navigatorKey.currentContext?.l10n pattern with fallbacks

[2026-01-20] Localized providers/auth_provider.dart with 8 l10n keys for 34 languages
- Added 8 new localization keys for authentication error messages
- Keys: authFailedToSignInWithGoogle, authenticationFailed, authFailedToSignInWithApple,
  authFailedToRetrieveToken, authUnexpectedErrorFirebase, authUnexpectedError,
  authFailedToLinkGoogle, authFailedToLinkApple
- Updated Dart code to use MyApp.navigatorKey.currentContext?.l10n pattern

[2026-01-20] Localized core/app_shell.dart with 22 l10n keys for 34 languages
- Added 22 new localization keys for OAuth integration messages
- Keys include success/error messages for Todoist, Asana, Google Tasks, ClickUp, Notion, Google, Whoop, GitHub
- Updated Dart code to use context.l10n instead of hardcoded strings

[2026-01-20] Added conversation_list_item.dart and date_list_item.dart to Priority 6.4
- Found ~12 hardcoded strings in conversation_list_item.dart (delete dialogs, "New", "Merging...", etc.)
- Found dateTimeFormat without locale in date_list_item.dart
- Updated affected files list for DateFormat without locale issue

[2026-01-20] Added Priority 6.4 - Date/Time Locale Issues
- Identified ~20 hardcoded time unit strings in time_utils.dart
- Found hardcoded "Yesterday" in temp.dart and transcript.dart
- Found ~30+ DateFormat usages without locale parameter
- This affects all date/time displays for non-English users

[2026-01-20] Created PRD_v2.MD and progress_v2.txt
- Comprehensive re-scan of all Dart files for hardcoded strings
- Identified ~80 additional strings in 10+ new files
- Added Priority 6 section for newly discovered files
- Total scope increased from ~125 to ~367 strings
- Key new areas: providers (auth, message, capture, onboarding), app_shell integrations

[2026-01-20] Previous entries preserved from progress.txt
- See original progress.txt for detailed changelog of P1-P5 completions

================================================================================
## NOTES
================================================================================

- **CRITICAL**: All l10n keys MUST be properly translated to each target language.
  Do NOT copy English text to non-English ARB files.
- Use `jq` CLI to add keys to ARB files (never read full files)
- Run `cd app && flutter gen-l10n` after ARB updates
- Run `app/test.sh` to verify changes
- Supported languages: 34 (en + 33 translations)
- Provider strings use: MyApp.navigatorKey.currentContext?.l10n.keyName ?? 'Fallback'
- PDF export strings (pw.Text) may need special handling

================================================================================
Legend:
[ ] = Pending
[~] = In Progress
[x] = Completed
