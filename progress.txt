# Localization Progress Tracker

**Project:** Omi Flutter App - Hardcoded String Localization
**Created:** 2026-01-20
**Status:** IN PROGRESS

## Summary

| Metric | Value |
|--------|-------|
| Total Files | 27 |
| Total Strings | ~125 |
| Completed | 16 |
| In Progress | 0 |
| Pending | 11 |
| Progress | 59% |

**CRITICAL ISSUE**: ~162 pre-existing l10n keys in non-English ARB files still contain
English text instead of proper translations. See PRIORITY 0 section below.

================================================================================
## PRIORITY 1: HIGH IMPACT - User-Facing Features (~65 strings)
================================================================================

### [x] pages/conversation_detail/widgets/create_template_bottom_sheet.dart (~20 strings)
Status: COMPLETED
Note: Added 14 new l10n keys to all 34 language ARB files and updated the Dart file to use
context.l10n pattern. Keys added: templateName, templateNameHint, nameMustBeAtLeast3Characters,
conversationPromptHint, pleaseEnterAppPrompt, promptMustBeAtLeast10Characters,
anyoneCanDiscoverTemplate, onlyYouCanUseTemplate, generatingDescription, creatingAppIcon,
installingApp, appCreatedAndInstalled, appCreatedSuccessfully, failedToCreateApp.
Reused existing keys: createCustomTemplate, conversationPrompt, pleaseEnterAppName, makePublic,
createApp, creatingYourApp.

### [x] pages/apps/providers/add_app_provider.dart (~20 strings)
Status: COMPLETED
Note: Added 21 new l10n keys to all 34 language ARB files. Keys added: addAppSelectCoreCapability,
addAppSelectPaymentPlan, addAppSelectCapability, addAppSelectLogo, addAppEnterChatPrompt,
addAppEnterConversationPrompt, addAppSelectTriggerEvent, addAppEnterWebhookUrl, addAppSelectCategory,
addAppFillRequiredFields, addAppUpdatedSuccess, addAppUpdateFailed, addAppSubmittedSuccess,
addAppErrorOpeningFilePicker (with placeholder), addAppErrorSelectingImage (with placeholder),
addAppPhotosPermissionDenied, addAppErrorSelectingImageRetry, addAppErrorSelectingThumbnail
(with placeholder), addAppErrorSelectingThumbnailRetry, addAppCapabilityConflictWithPersona,
addAppPersonaConflictWithCapabilities.

### [x] pages/persona/persona_provider.dart (~15 strings)
Status: COMPLETED
Note: Added 13 new l10n keys to all 34 language ARB files and updated the Dart file to use
MyApp.navigatorKey.currentContext!.l10n pattern. Keys added: personaTwitterHandleNotFound,
personaTwitterHandleSuspended, personaFailedToVerifyTwitter, personaFailedToFetch, personaFailedToCreate,
personaConnectKnowledgeSource, personaUpdatedSuccessfully, personaFailedToUpdate, personaPleaseSelectImage,
personaFailedToCreateTryLater, personaFailedToCreateWithError (with placeholder), personaFailedToEnable,
personaErrorEnablingWithError (with placeholder).

### [x] pages/payments/payment_method_provider.dart (3 strings)
Status: COMPLETED
Note: Added 3 new l10n keys to all 34 language ARB files and updated the Dart file to use
MyApp.navigatorKey.currentContext!.l10n pattern. Keys added: paymentFailedToFetchCountries,
paymentFailedToSetDefault, paymentFailedToSavePaypal.

### [x] pages/payments/paypal_setup_page.dart (2 strings)
Status: COMPLETED
Note: Updated Dart file to use existing l10n keys (paypalEmailHint, paypalMeLinkHint) for placeholder
hint texts. Removed const from InputDecoration to allow non-constant l10n values. Keys were already
in ARB files from previous session.

### [x] pages/payments/models/payment_method_config.dart (4 strings)
Status: COMPLETED
Note: Added 5 new l10n keys to all 34 language ARB files. Refactored PaymentMethodConfig class to
accept localized title and subtitle as constructor parameters instead of hardcoding them. Updated
payments_page.dart to pass localized strings using context.l10n pattern. Keys added:
paymentMethodStripe, paymentMethodPayPal, paymentStatusActive, paymentStatusConnected,
paymentStatusNotConnected.

================================================================================
## PRIORITY 2: MEDIUM IMPACT - Settings & Configuration (~30 strings)
================================================================================

### [x] pages/apps/widgets/payment_details_widget.dart (5 strings)
Status: COMPLETED
Note: Added 5 new l10n keys to all 34 language ARB files and updated the Dart file to use
context.l10n pattern. Keys added: paymentAppCost, paymentEnterValidAmount,
paymentEnterAmountGreaterThanZero, paymentPlan, paymentNoneSelected.
The hintText '20' is a numeric placeholder example and doesn't require localization.

### [x] pages/settings/ai_app_generator_provider.dart (9 strings)
Status: COMPLETED
Note: Added 9 new l10n keys to all 34 language ARB files and updated the Dart file to use
MyApp.navigatorKey.currentContext!.l10n pattern. Keys added: aiGenPleaseEnterDescription,
aiGenCreatingAppIcon, aiGenErrorOccurredWithDetails (with placeholder), aiGenAppCreatedSuccessfully,
aiGenFailedToCreateApp, aiGenErrorWhileCreatingApp, aiGenFailedToGenerateApp, aiGenFailedToRegenerateIcon,
aiGenPleaseGenerateAppFirst.

### [x] pages/persona/twitter/social_profile.dart (7 strings)
Status: COMPLETED
Note: Added 7 new l10n keys to all 34 language ARB files and updated the Dart file to use
context.l10n pattern. Keys added: xHandleTitle, xHandleDescription, xHandleHint,
xHandlePleaseEnter, xHandlePleaseEnterValid, nextButton, connectOmiDevice.
The original audit identified only 3 strings but 7 were actually found upon closer inspection.

### [x] pages/settings/widgets/plans_sheet.dart (3 strings)
Status: COMPLETED
Note: Added 7 new l10n keys to all 34 language ARB files and updated the Dart file to use
context.l10n pattern. Keys added: planSwitchingDescriptionWithTitle (with placeholder),
planUpgradeScheduledMessage, couldNotSchedulePlanChange, subscriptionReactivatedDefault,
subscriptionSuccessfulCharged, couldNotProcessSubscription, couldNotLaunchUpgradePage.
Reused existing keys: confirmPlanChange, confirmAndProceed, cancel, anErrorOccurredTryAgain,
couldNotOpenPaymentSettings, managePaymentMethod.
The original audit identified 3 strings but the file had 13+ hardcoded strings requiring localization.

### [x] pages/settings/transcription_settings_page.dart (2 strings)
Status: COMPLETED
Note: Added 2 new l10n keys to all 34 language ARB files and updated the Dart file to use
context.l10n pattern. Keys added: transcriptionJsonPlaceholder, transcriptionSourceOmi.
The JSON placeholder was changed from a literal JSON example to "Paste your JSON configuration here..."
to avoid ICU message format conflicts with curly braces.
Ran flutter gen-l10n and verified with test.sh.

### [x] pages/settings/ai_app_generator_page.dart (1 string)
Status: COMPLETED
Note: Added 1 new l10n key to all 34 language ARB files and updated the Dart file to use
context.l10n pattern. Key added: pricePlaceholder.
The value "0.00" is a numeric format placeholder and remains the same across all languages.
Ran flutter gen-l10n and verified with test.sh.

### [x] pages/settings/import_history_page.dart (2 strings)
Status: COMPLETED
Note: Added 2 new l10n keys to all 34 language ARB files and updated the Dart file to use
context.l10n pattern. Keys added: importErrorOpeningFilePicker (with placeholder),
importErrorGeneric (with placeholder).
Ran flutter gen-l10n and verified with test.sh.

### [x] pages/apps/app_detail/app_detail.dart (1 string)
Status: COMPLETED
Note: Updated Dart file to use existing l10n key `errorWithMessage` with `{error}` placeholder.
The key was already available in all 34 language ARB files, so no ARB updates were needed.
Changed line 227 from hardcoded `'Error: ${e.toString()}'` to `context.l10n.errorWithMessage(e.toString())`.
Ran flutter gen-l10n and verified with test.sh.

================================================================================
## PRIORITY 3: NOTIFICATIONS & SERVICES (~10 strings)
================================================================================

### [x] services/notifications/merge_notification_handler.dart (2 strings)
Status: COMPLETED
Note: Added 2 new l10n keys to all 34 language ARB files and updated the Dart file to use
MyApp.navigatorKey.currentContext?.l10n pattern with fallback. Keys added: mergeConversationsSuccessTitle,
mergeConversationsSuccessBody (with {count} placeholder for total merged conversations count).
Ran flutter gen-l10n and verified with test.sh.

### [x] services/notifications/daily_reflection_notification.dart (2 strings)
Status: COMPLETED
Note: Added 2 new l10n keys to all 34 language ARB files and updated the Dart file to use
MyApp.navigatorKey.currentContext?.l10n pattern with fallback. Keys added: dailyReflectionNotificationTitle,
dailyReflectionNotificationBody.
Ran flutter gen-l10n and verified with test.sh.

### [ ] services/notifications/action_item_notification_handler.dart (1 string)
Status: PENDING
Strings:
- [ ] Line 42: 'Omi Reminder' (notification title)

### [ ] services/devices/device_connection.dart (2 strings)
Status: PENDING
Strings:
- [ ] Line 535: '... Disconnected' (notification title with param)
- [ ] Line 536: 'Please reconnect to continue using your ...' (notification body with param)

### [ ] services/devices/models.dart (1 string)
Status: PENDING
Strings:
- [ ] Line 72: 'Looks like the device is not connected...' (error message)

================================================================================
## PRIORITY 4: DESKTOP APP (~15 strings)
================================================================================

### [ ] desktop/pages/onboarding/desktop_onboarding_wrapper.dart (5 strings)
Status: PENDING
Strings:
- [ ] Line 37: 'Sign In' (step title)
- [ ] Line 43: 'Your Name' (step title)
- [ ] Line 49: 'Language' (step title)
- [ ] Line 55: 'Permissions' (step title)
- [ ] Line 61: 'Complete' (step title)

### [ ] desktop/pages/settings/desktop_settings_modal.dart (2 strings)
Status: PENDING
Strings:
- [ ] Line 2286: 'https://omi.me' (website - may be intentional)
- [ ] Line 2294: 'team@basedhardware.com' (email - may be intentional)

### [ ] desktop/pages/conversations/widgets/desktop_name_speaker_dialog.dart (3 strings)
Status: PENDING
Strings:
- [ ] Line 251: 'Enter Person\'s Name' (hintText)
- [ ] Line 272: 'Cancel' (button)
- [ ] Line 476: 'Save' (button)

================================================================================
## PRIORITY 5: LOWER IMPACT (~5 strings)
================================================================================

### [ ] pages/conversation_detail/page.dart (1 string)
Status: PENDING
Strings:
- [ ] Line 991: 'Search transcript or summary...' (hintText)

### [ ] pages/conversations/widgets/goal_tracker_widget.dart (1 string)
Status: PENDING
Strings:
- [ ] Line 381: 'My goal' (default title)

### [ ] main.dart (1 string)
Status: PENDING
Strings:
- [ ] Line 209: 'Omi' (desktop window title)

================================================================================
## CHANGELOG
================================================================================

[2026-01-20] Localized daily_reflection_notification.dart
- Added 2 new l10n keys to all 34 language ARB files
- Updated Dart file to use MyApp.navigatorKey.currentContext?.l10n pattern with fallback
- Keys: dailyReflectionNotificationTitle, dailyReflectionNotificationBody
- Ran flutter gen-l10n and verified with test.sh

[2026-01-20] Localized merge_notification_handler.dart
- Added 2 new l10n keys to all 34 language ARB files
- Updated Dart file to use MyApp.navigatorKey.currentContext?.l10n pattern with fallback
- Keys: mergeConversationsSuccessTitle, mergeConversationsSuccessBody (with {count} placeholder)
- Ran flutter gen-l10n and verified with test.sh

[2026-01-20] Localized app_detail.dart
- Reused existing l10n key `errorWithMessage` with `{error}` placeholder
- No ARB file updates needed - key already existed in all 34 languages
- Updated Dart file to use context.l10n.errorWithMessage(e.toString())
- Ran flutter gen-l10n and verified with test.sh

[2026-01-20] Identified pre-existing untranslated keys
- Audited app_ar.arb to find keys with English values in non-English ARB files
- Found ~162 keys that were never properly translated
- Added PRIORITY 0 task to translate these keys
- Updated PRD.md to explicitly require proper translations (FR-3)
- Added CRITICAL notice in progress.txt NOTES section

[2026-01-20] Localized import_history_page.dart
- Added 2 new l10n keys to all 34 language ARB files
- Updated Dart file to use context.l10n pattern
- Keys: importErrorOpeningFilePicker (with placeholder), importErrorGeneric (with placeholder)
- Both keys include {message}/{error} placeholders for error details
- Ran flutter gen-l10n and verified with test.sh

[2026-01-20] Localized ai_app_generator_page.dart
- Added 1 new l10n key to all 34 language ARB files
- Updated Dart file to use context.l10n pattern
- Key: pricePlaceholder
- Value "0.00" is a numeric format placeholder, same across all languages
- Ran flutter gen-l10n and verified with test.sh

[2026-01-20] Localized transcription_settings_page.dart
- Added 2 new l10n keys to all 34 language ARB files
- Updated Dart file to use context.l10n pattern
- Keys: transcriptionJsonPlaceholder, transcriptionSourceOmi
- Changed JSON placeholder from literal example to user-friendly text to avoid ICU format conflicts
- Ran flutter gen-l10n and verified with test.sh

[2026-01-20] Localized plans_sheet.dart
- Added 7 new l10n keys to all 34 language ARB files
- Updated Dart file to use context.l10n pattern
- Keys: planSwitchingDescriptionWithTitle (with placeholder), planUpgradeScheduledMessage,
  couldNotSchedulePlanChange, subscriptionReactivatedDefault, subscriptionSuccessfulCharged,
  couldNotProcessSubscription, couldNotLaunchUpgradePage
- Reused 6 existing keys: confirmPlanChange, confirmAndProceed, cancel, anErrorOccurredTryAgain,
  couldNotOpenPaymentSettings, managePaymentMethod
- Fixed null safety issue with selectedPrice!.title
- Ran flutter gen-l10n and verified with test.sh

[2026-01-20] Localized social_profile.dart
- Added 7 new l10n keys to all 34 language ARB files
- Updated Dart file to use context.l10n pattern
- Keys: xHandleTitle, xHandleDescription, xHandleHint, xHandlePleaseEnter, xHandlePleaseEnterValid,
  nextButton, connectOmiDevice
- Original audit found 3 strings, but 7 were actually in the file
- Ran flutter gen-l10n and verified with test.sh

[2026-01-20] Localized ai_app_generator_provider.dart
- Added 9 new l10n keys to all 34 language ARB files
- Updated Dart file to use MyApp.navigatorKey.currentContext!.l10n pattern
- Keys: aiGenPleaseEnterDescription, aiGenCreatingAppIcon, aiGenErrorOccurredWithDetails (with placeholder),
  aiGenAppCreatedSuccessfully, aiGenFailedToCreateApp, aiGenErrorWhileCreatingApp, aiGenFailedToGenerateApp,
  aiGenFailedToRegenerateIcon, aiGenPleaseGenerateAppFirst
- Ran flutter gen-l10n and verified with test.sh

[2026-01-20] Localized payment_details_widget.dart
- Added 5 new l10n keys to all 34 language ARB files
- Updated Dart file to use context.l10n pattern
- Keys: paymentAppCost, paymentEnterValidAmount, paymentEnterAmountGreaterThanZero, paymentPlan, paymentNoneSelected
- Ran flutter gen-l10n and verified with test.sh

[2026-01-20] Localized payment_method_config.dart
- Added 5 new l10n keys to all 34 language ARB files
- Refactored PaymentMethodConfig class to accept localized title and subtitle parameters
- Updated payments_page.dart to pass localized strings using context.l10n pattern
- Keys: paymentMethodStripe, paymentMethodPayPal, paymentStatusActive, paymentStatusConnected, paymentStatusNotConnected
- Ran flutter gen-l10n and verified with test.sh

[2026-01-20] Localized paypal_setup_page.dart
- Updated Dart file to use existing l10n keys: paypalEmailHint, paypalMeLinkHint
- Removed const from InputDecoration to allow non-constant l10n values
- Ran flutter gen-l10n and verified with test.sh

[2026-01-20] Localized payment_method_provider.dart
- Added 3 new l10n keys to all 34 language ARB files
- Updated Dart file to use MyApp.navigatorKey.currentContext!.l10n pattern
- Keys: paymentFailedToFetchCountries, paymentFailedToSetDefault, paymentFailedToSavePaypal
- Ran flutter gen-l10n and verified with test.sh

[2026-01-20] Localized persona_provider.dart
- Added 13 new l10n keys to all 34 language ARB files
- Updated Dart file to use MyApp.navigatorKey.currentContext!.l10n pattern
- Keys cover Twitter verification, persona CRUD operations, and error messages
- Two keys with placeholders for error details: personaFailedToCreateWithError, personaErrorEnablingWithError
- Ran flutter gen-l10n and verified with test.sh

[2026-01-20] Localized add_app_provider.dart
- Added 21 new l10n keys to all 34 language ARB files
- Updated Dart file to use MyApp.navigatorKey.currentContext!.l10n pattern
- Keys cover validation errors, success/error messages, and capability conflicts
- Ran flutter gen-l10n and verified with test.sh

[2026-01-20] Localized create_template_bottom_sheet.dart
- Added 14 new l10n keys to all 34 language ARB files
- Updated Dart file to use context.l10n pattern
- Ran flutter gen-l10n and verified with test.sh

[2026-01-20] Initial audit completed
- Identified 27 files with hardcoded strings
- Found ~125 strings needing localization
- Created PRD.MD and progress.txt
- Previous progress.txt was inaccurate (claimed 100% complete)

================================================================================
## PRIORITY 0: CRITICAL - Pre-existing Untranslated Keys (~162 keys)
================================================================================

### [ ] Translate pre-existing English keys in all non-English ARB files
Status: PENDING
Note: An audit of app_ar.arb found ~162 keys that still contain English text instead of
proper translations. These keys existed BEFORE this localization project started and were
never properly translated. This task has HIGH PRIORITY as it affects all users of non-English
languages.

Sample of untranslated keys (showing English values that need translation):
- couldNotLaunchUpgradePage: "Could not launch upgrade page. Please try again."
- signOutConfirmation: "Are you sure you want to sign out?"
- deleteRecording: "Delete Recording"
- memoryCreationFailed: "Memory creation failed. It will be retried soon."
- resetPreferencesDisclaimer: "Resetting preferences will not affect your memories..."
- listeningFrom: "Listening from"
- connectToFriend: "Connect to Friend"
- speakingLanguage: "Speaking Language"
- recordingLanguage: "Recording Language"
- selectYourLanguage: "Select Your Language"
- discoverNewApps: "Discover new apps"
- tryOurLatestIntegrations: "Try our latest integrations"
- speechProfileCompleted: "Speech Profile Completed"
- actionItemsExtracted: "Action Items Extracted"
- And ~148 more keys...

This task requires:
1. Extract all English keys from app_ar.arb (or any non-English ARB)
2. Generate proper translations for all 33 non-English languages
3. Update all ARB files with correct translations
4. Run flutter gen-l10n and verify with test.sh

================================================================================
## NOTES
================================================================================

- **CRITICAL**: All l10n keys MUST be properly translated to each target language.
  Do NOT copy English text to non-English ARB files. Each language file must contain
  the actual translation in that language.
- Use `jq` CLI to add keys to ARB files (never read full files)
- Run `cd app && flutter gen-l10n` after ARB updates
- Run `app/test.sh` to verify changes
- Supported languages: 34 (en + 33 translations)
- Some notification strings may not have BuildContext access

================================================================================
Legend:
[ ] = Pending
[~] = In Progress
[x] = Completed
