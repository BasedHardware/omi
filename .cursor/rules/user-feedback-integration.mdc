---
description: "Guidelines for learning from user interactions, corrections, and feedback"
alwaysApply: true
---

# User Feedback Integration

Guidelines for learning from user interactions to continuously improve agent behavior and personalize guidance.

## Core Principle

Listen actively to user feedback, extract lessons, and update rules proactively. Don't wait for explicit instruction to learn from patterns.

## Listen for Corrections

**When user corrects, extract the lesson.**

**What to listen for**:
- "No, don't..."
- "That's wrong..."
- "You misunderstood..."
- "That's not how..."

**What to extract**:
- What was wrong
- Why it was wrong
- What should be done instead
- What rule/skill was missing

**Example**:
```
User: "No, don't use postprocess_conversation, it's deprecated"

Extract:
- Mistake: Used deprecated function
- Lesson: Always check for deprecated functions before using
- Action: Update common-mistakes.mdc rule
```

**How to respond**:
1. Acknowledge the correction
2. Extract the lesson immediately
3. Update relevant rule
4. Apply lesson going forward

## Track Rejections

**When user rejects approach, understand why.**

**What to listen for**:
- "No, do it differently"
- "That's not what I meant"
- "Can you try another approach?"

**What to extract**:
- What approach was rejected
- Why it was rejected (if stated)
- What user actually wants
- Pattern in rejections

**Example**:
```
User: "That's not what I meant - I need more context first"

Extract:
- Rejection: Started implementing too quickly
- Why: User wants planning phase first
- Lesson: This user prefers planning phase
- Action: Update user preference profile, pre-implementation-checklist.mdc
```

**How to respond**:
1. Understand the rejection
2. Ask clarifying questions if needed
3. Extract the lesson
4. Update preferences and rules
5. Adapt approach

## Learn Preferences

**Build understanding of user's style and needs.**

**What to track**:
- Coding style preferences
- Communication preferences
- Workflow preferences
- Common needs

**Examples**:
- Prefers small PRs
- Wants more context before implementation
- Likes detailed explanations
- Prefers planning phase
- Wants reasoning, not just implementation

**How to learn**:
1. Track what user approves/rejects
2. Identify patterns in feedback
3. Build user preference profile
4. Adapt guidance to user's style
5. Personalize future interactions

**Example**:
```
Pattern detected: User consistently asks for reasoning

Learning:
- Preference: Wants reasoning, not just implementation
- Update: user preference profile
- Action: Always explain reasoning for this user
```

## Ask for Feedback

**When uncertain, ask "did this approach work for you?"**

**When to ask**:
- After implementing a change
- When trying a new approach
- When unsure if it meets user's needs
- After significant work

**How to ask**:
- Be specific: "Did this approach work for you?"
- Be open: "Is there anything you'd like me to do differently?"
- Be proactive: "Let me know if this isn't what you wanted"

**Example**:
```
After implementing feature:
"Did this approach work for you? Is there anything you'd like me to do differently?"

User feedback:
- "Yes, but next time provide more context upfront"
- Extract: User wants more context
- Update: user preference profile, context-communication.mdc
```

## Update Proactively

**Don't wait for explicit instruction to learn from patterns.**

**When to update**:
- After user corrections
- When patterns emerge
- When gaps are identified
- When preferences are detected

**How to update**:
1. Extract lesson from interaction
2. Identify relevant rule
3. Update rule with example
4. Update user preference profile (if applicable)
5. Apply going forward

**Example**:
```
User corrects: "No, don't use that function"

Proactive update:
1. Extract: Always check for deprecated functions
2. Update: common-mistakes.mdc rule
3. Add: Example from this interaction
4. Apply: Check for deprecated functions in future
```

## Respect User Patterns

**Adapt to user's preferred workflow and communication style.**

**What to adapt**:
- Communication style
- Workflow approach
- Level of detail
- Planning vs. implementation balance

**How to adapt**:
1. Learn user's preferences
2. Build preference profile
3. Adapt communication style
4. Emphasize preferred approaches
5. Avoid disliked patterns

**Example**:
```
User preference profile:
- Prefers planning phase: true
- Wants detailed explanations: true
- Likes reasoning: true

Adaptation:
- Always provide plan first
- Include detailed explanations
- Explain reasoning for decisions
```

## Learning Workflow

### 1. Detect Feedback

**Monitor conversation for**:
- Corrections
- Rejections
- Clarifications
- Approvals
- Preferences

### 2. Extract Lesson

**For each feedback**:
- What was the issue?
- Why did it happen?
- What should be done instead?
- What rule/skill was missing?

### 3. Update Rules

**Update relevant rules**:
- Add examples
- Enhance guidance
- Create new rules if needed
- Update user preference profile

### 4. Apply Learning

**Going forward**:
- Follow updated rules
- Respect user preferences
- Avoid learned mistakes
- Emphasize successful patterns

## Example Scenarios

### Scenario 1: Correction

```
User: "No, don't use postprocess_conversation, it's deprecated"

Response:
1. Acknowledge: "Got it, I'll check for deprecated functions"
2. Extract: Always check for deprecated functions
3. Update: common-mistakes.mdc rule
4. Apply: Check for deprecated functions going forward
```

### Scenario 2: Rejection

```
User: "That's not what I meant - I need more context first"

Response:
1. Understand: "I'll provide more context upfront"
2. Extract: User prefers planning phase
3. Update: user preference profile, pre-implementation-checklist.mdc
4. Adapt: Always provide context first for this user
```

### Scenario 3: Preference Learning

```
User: "Can you explain why you chose this approach?"

Response:
1. Explain: Provide reasoning
2. Extract: User wants reasoning
3. Update: user preference profile
4. Adapt: Always explain reasoning for this user
```

## Related Rules

- `.cursor/rules/common-mistakes.mdc` - Common mistakes (updated from interactions)
- `.cursor/rules/pre-implementation-checklist.mdc` - Checklist (updated from interactions)
- `.cursor/rules/context-communication.mdc` - Communication (updated from interactions)
- `.cursor/rules/verification.mdc` - Verification guidelines

## Related Cursor Resources

### Skills
- `.cursor/skills/self-improvement/SKILL.md` - Self-improvement meta-skill
- `.cursor/skills/rule-updater/SKILL.md` - Rule updater skill

### Commands
- `/learn-from-conversation` - Learn from current conversation
- `/self-improve` - Analyze patterns and update rules

### Documentation
- `.cursor/docs/user-interaction-learning.md` - User interaction learning system
- `.cursor/docs/feedback-loop.md` - Feedback loop system

## Best Practices

1. **Listen actively**: Pay attention to all user feedback
2. **Extract immediately**: Don't wait to extract lessons
3. **Update promptly**: Update rules when patterns emerge
4. **Personalize**: Adapt to user's preferences
5. **Track patterns**: Look for recurring issues
6. **Test updates**: Verify rule updates improve behavior
7. **Be proactive**: Don't wait for explicit instruction
