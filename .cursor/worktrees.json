{
  "_comment": "Worktree setup configuration for Omi parallel agents",
  "_comment2": "See https://cursor.com/docs/configuration/worktrees for documentation.",
  "_comment3": "ROOT_WORKTREE_PATH points to the root worktree directory",
  "setup-worktree": [
    "# Install backend Python dependencies",
    "cd backend && pip install -r requirements.txt 2>/dev/null || true",
    "",
    "# Install Flutter dependencies",
    "cd app && flutter pub get 2>/dev/null || true",
    "",
    "# Install web dependencies (if web directory exists)",
    "cd web/frontend && npm install 2>/dev/null || pnpm install 2>/dev/null || true",
    "",
    "# Copy environment files from root worktree if they exist",
    "if [ -f \"$ROOT_WORKTREE_PATH/.env\" ]; then cp \"$ROOT_WORKTREE_PATH/.env\" .env; fi",
    "if [ -f \"$ROOT_WORKTREE_PATH/backend/.env\" ]; then cp \"$ROOT_WORKTREE_PATH/backend/.env\" backend/.env; fi",
    "if [ -f \"$ROOT_WORKTREE_PATH/app/.dev.env\" ]; then cp \"$ROOT_WORKTREE_PATH/app/.dev.env\" app/.dev.env; fi"
  ],
  "setup-worktree-unix": [
    "# Unix/macOS specific setup commands",
    "cd backend && pip install -r requirements.txt 2>/dev/null || true",
    "cd app && flutter pub get 2>/dev/null || true",
    "cd web/frontend && npm install 2>/dev/null || pnpm install 2>/dev/null || true",
    "",
    "# Copy environment files",
    "[ -f \"$ROOT_WORKTREE_PATH/.env\" ] && cp \"$ROOT_WORKTREE_PATH/.env\" .env || true",
    "[ -f \"$ROOT_WORKTREE_PATH/backend/.env\" ] && cp \"$ROOT_WORKTREE_PATH/backend/.env\" backend/.env || true",
    "[ -f \"$ROOT_WORKTREE_PATH/app/.dev.env\" ] && cp \"$ROOT_WORKTREE_PATH/app/.dev.env\" app/.dev.env || true"
  ],
  "setup-worktree-windows": [
    "# Windows specific setup commands (PowerShell)",
    "cd backend; if (Test-Path requirements.txt) { pip install -r requirements.txt }",
    "cd app; if (Test-Path pubspec.yaml) { flutter pub get }",
    "cd web/frontend; if (Test-Path package.json) { npm install }",
    "",
    "# Copy environment files",
    "if (Test-Path \"$env:ROOT_WORKTREE_PATH\\.env\") { Copy-Item \"$env:ROOT_WORKTREE_PATH\\.env\" .env }",
    "if (Test-Path \"$env:ROOT_WORKTREE_PATH\\backend\\.env\") { Copy-Item \"$env:ROOT_WORKTREE_PATH\\backend\\.env\" backend\\.env }",
    "if (Test-Path \"$env:ROOT_WORKTREE_PATH\\app\\.dev.env\") { Copy-Item \"$env:ROOT_WORKTREE_PATH\\app\\.dev.env\" app\\.dev.env }"
  ]
}
