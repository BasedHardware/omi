.PHONY: test build clean

test:
	@echo "ðŸ§ª Running tests..."
	@dart run build_runner build --delete-conflicting-outputs || { echo "âŒ Build runner failed"; exit 1; }
	@[ -x "$(CURDIR)/test.sh" ] || { echo "âŒ test.sh not found or not executable"; exit 1; }
	@if ! "$(CURDIR)/test.sh"; then \
		echo "âŒ Tests failed"; \
		echo "Please check the test output above for details"; \
		exit 1; \
	fi
build:
	@echo "ðŸ—ï¸ Building..."
	@dart run build_runner build --delete-conflicting-outputs || { echo "âŒ Build failed"; exit 1; }
	@echo "âœ… Build completed successfully"
clean:
	@echo "ðŸ§¹ Cleaning..."
	@command -v flutter >/dev/null 2>&1 || { echo "âŒ Flutter not found"; exit 1; }
	@flutter clean
	@rm -rf coverage build 2>/dev/null || true
	@echo "âœ… Clean completed successfully"
